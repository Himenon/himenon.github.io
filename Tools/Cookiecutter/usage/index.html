<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@himenoglyph" />
<meta property="og:url" content="https://himenon.github.io/Tools/Cookiecutter/usage/" />
<meta property="og:title" content="自作のファイルテンプレート(雛形)を生成するCookiecutterの使い方 - 技術の定点観測" />
<meta property="og:description" content="手を動かして実践したことの内容の集積場です。真似して学んでいくスタンス。楽しんでやる。" />
<meta property="og:image" content="https://himenon.github.io/images/apple-touch-icon.png" />
<link rel="apple-touch-icon" sizes="180x180" href="https://himenon.github.io/images/miku.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://himenon.github.io/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://himenon.github.io/images/favicon-16x16.png">
<meta name="msapplication-TileColor" content="#2d89ef">
<meta name="theme-color" content="#ffffff">
    <title>自作のファイルテンプレート(雛形)を生成するCookiecutterの使い方 | 技術の定点観測</title>
    
    <link rel="stylesheet" href="/stylesheets/reboot.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/styles/default.min.css">
    <link rel="stylesheet" href="/stylesheets/pc.css">
    <link rel="stylesheet" href="/stylesheets/tablet.css">
    <link rel="stylesheet" href="/stylesheets/sp.css">
    <link rel="stylesheet" href="/stylesheets/prism.css">
</head>
<body>
    <header class="site-header">
        <h1><a href="https://himenon.github.io/">技術の定点観測</a></h1>
        <div class="sns-share"><a href="https://twitter.com/share?ref_src=twsrc%5Etfw"
   class="twitter-share-button"
   data-text="自作のファイルテンプレート(雛形)を生成するCookiecutterの使い方 - 技術の定点観測"
   data-via="himenoglyph "
   data-related="himenoglyph"
   data-show-count="true">Tweet</a>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></div>
    </header>
    <div class="container">
        <div class="nav-layout site-nav"><h2>サイト内トピック</h2><ul><li  class="most-deep-item" ><span><b><u>Hey!</u></b></span></li><li  class="most-deep-item" ><a href="https://himenon.github.io/pick-up-article/">Pick Up Article</a></li><li ><span><b><u>Docker</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/Docker/command/">Dockerコマンド</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/Docker/pycharm/">PycharmでDockerを使う方法</a></li></ul>
</li><li ><span><b><u>Firebase</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/Firebase/Auth-Error-Tips/">FirebaseのAuthで躓いたこと</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/Firebase/Firebase-Cloud-Functions/">FirebaseにおけるCloud Functions</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/Firebase/Firebase-Starter/">Firebaseことはじめ</a></li></ul>
</li><li ><span><b><u>GCP</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/GCP/Cloud-Function/">Cloud Function</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/GCP/GKE/">GKEのコマンド</a></li></ul>
</li><li ><span><b><u>Infrastructure</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/Infrastructure/Multiple-Reverse-Proxy-Sapmle-with-oauth2_proxy/">複数のホストをoauth2_proxyを用いてOAuth認証してリバースプロキシする</a></li></ul>
</li><li ><span><b><u>JavaScript</u></b></span></li><li>
    <ul><li ><span><b><u>Frontend</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/JavaScript/Frontend/settings/">lodash</a></li><li ><span><b><u>Es6</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/JavaScript/Frontend/es6/usage-axios/">Axiosでasync/awaitを利用する</a></li></ul>
</li><li ><span><b><u>Vuejs</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/JavaScript/Frontend/vuejs/my-vue-setup/">Vueのセットアップ</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/JavaScript/Frontend/vuejs/nuxtjs/">Nuxt.jsをやる</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/JavaScript/Frontend/vuejs/ssr-cache-investigation/">VuejsのSSR(Server Side Rendering)のページ・部分キャッシュは何で実装できるか</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/JavaScript/Frontend/vuejs/vuex-usage/">VuexのModuleの使い方</a></li></ul>
</li></ul>
</li><li ><span><b><u>NodeJS</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/JavaScript/NodeJS/Request-library-description-for-json-value/">nodeのrequestライブラリの`json`オプションの取り扱いについて</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/JavaScript/NodeJS/dynamic-import/">PackageのDynamic Import</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/JavaScript/NodeJS/execute-async-mjs/">Module jsで非同期関数を実行する</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/JavaScript/NodeJS/get-collect-domain-name/">JavaScriptで正確なドメイン名をパースすには？</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/JavaScript/NodeJS/manage-npm-package/">npmのpaackage管理について</a></li></ul>
</li></ul>
</li><li ><span><b><u>MySQL</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/MySQL/character-code/">DockerのMySQLでUTF-8を使えるようにする</a></li></ul>
</li><li ><span><b><u>Profile</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/Profile/">Profileの目次</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/Profile/github-activity/">Githubの活動状況</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/Profile/skill/">スキルセット</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/Profile/study-history/">参加した勉強会</a></li></ul>
</li><li ><span><b><u>Tools</u></b></span></li><li>
    <ul><li ><span><b><u>Cookiecutter</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/Tools/Cookiecutter/usage/">自作のファイルテンプレート(雛形)を生成するCookiecutterの使い方</a></li></ul>
</li><li ><span><b><u>Git</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/Tools/Git/git-tips/">Git Tips</a></li></ul>
</li><li ><span><b><u>Github</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/Tools/Github/Github-GraphQL/">GithubのGraphQLを利用する</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/Tools/Github/Github-Multi-Login-User/">Githubで複数ユーザーのログインをした時の対応</a></li></ul>
</li><li ><span><b><u>Slack</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/Tools/Slack/slack-library/">言語別Slack通知ライブラリ</a></li></ul>
</li><li ><span><b><u>Zapier</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/Tools/Zapier/zapier-development/">Zapierで利用可能なアプリをを時前で作成する</a></li></ul>
</li></ul>
</li><li ><span><b><u>Blog</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/blog/2018-09-17-PyConJP/">PyConJP2018の個人レポート</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/blog/2018-09-20/">genというライブラリを書き直している</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/blog/Container-App-Directory-Management-Consideration/">コンテナアプリケーション作成時のディレクトリ成長設計の考察</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/blog/Container-Worker-Design/">コンテナ型のワーカーの設計（仮）</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/blog/TDD/">TDDポエム</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/blog/read-basic-knowledge-of-nosql/">NOSQLとは何か...</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/blog/static-site-generator/">静的サイトジェネレーターを選ぶとき、何を思ふ？</a></li></ul>
</li><li ><span><b><u>Event</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/event/2018-05-21-Cloud-Native/">[イベントレポート] Cloud Native Meetup Tokyo #1</a></li></ul>
</li><li ><span><b><u>Kubernetes</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/kubernetes/Nginx access control for kubernetes/">Kubernetesに配置したNginxでアクセス制御する</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/kubernetes/Shortcut-for-kubectl/">Kubernetesでよく使うコマンド（コピペ用）</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/kubernetes/cron-wake-up-down/">GKEをCronで起動・停止させる</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/kubernetes/error helm incompatible version/">Error: incompatible versions client[v2.8.2] server[v2.7.2]</a></li></ul>
</li><li ><span><b><u>mongoDB</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/mongoDB/basic-query/">MongoDBの基本クエリ</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/mongoDB/basic-read-write/">mongo DBの基本的なRead Write</a></li></ul>
</li><li ><span><b><u>Presentation</u></b></span></li><li>
    <ul><li ><span><b><u>2018</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/presentation/2018/03-02-Yoidore-GCPUG-LT/">酔いどれGCPUG で発表してきました</a></li></ul>
</li></ul>
</li><li ><span><b><u>Python</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/python/test-know-how/">PythonのTest</a></li><li ><span><b><u>Django</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/python/Django/Introduction-of-Celery-Django/">Django 2.0にCelery 4.0を導入し、WEBの管理画面でCronを管理する</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/python/Django/Seperate-Django-Database/">Djangoで複数のデータベースを利用する</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/python/Django/fixture/">fixtureを読み込む</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/python/Django/initialize-new-app/">DjangoにAppを新たに追加したときにやること</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/python/Django/show-many-to-many-admin-view/">DjangoでMany to ManyをAdmin画面のリストに表示する方法</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/python/Django/signal/">DjangoのSignalの使い方</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/python/Django/static-file/">Staticファイルの取扱</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/python/Django/unix-socket-and-nginx/">DjangoとNginxのTips</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/python/Django/validate-only-alphabet/">DjangoでValidation アルファベットのみのバリデーションを実装する</a></li></ul>
</li><li ><span><b><u>Flask</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/python/Flask/Hello-Flask-Streamming-Content/">Flaskのストリーミングを利用してみる</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/python/Flask/tips/">FlaskのTips</a></li></ul>
</li><li ><span><b><u>Jupyter</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/python/jupyter/change-jupyter-config-dir/">jupyter_notebook_config.pyの読み込み先を変更する</a></li></ul>
</li><li ><span><b><u>Mkdocs</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/python/mkdocs/tips/">MkDocsのtips</a></li></ul>
</li><li ><span><b><u>Pandas</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/python/pandas/pandas-convert-column-to-datetime/">PandasのColumnをDateTimeに型変換する</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/python/pandas/visualize-time/">時間データのビジュアライズ</a></li></ul>
</li></ul>
</li><li ><span><b><u>Raspberrypi</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/raspberrypi/os-install/">RaspberrypiのOSインストール</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/raspberrypi/purchace/">Raspberrypiのパーツを買った</a></li></ul>
</li></ul></div>
        <div class="content">
            <div class="content-body"><h1 id="cookiecutter">自作のファイルテンプレート(雛形)を生成するCookiecutterの使い方<a class="headerlink" href="#cookiecutter" title="Permanent link">&para;</a></h1>
<p id="created_at">作成日: <time datetime="2018-05-20T22:00">2018/05/20 22:00</time></p>

<p id="updated_at">更新日: <time datetime="2018-05-21T18:00">2018/05/21 18:00</time></p>

<p>開発に限らず、PC作業をしているとさまざまな場面でファイルやディレクトリツリーを構築します。
ここでは、生成されるこれらのファイル、ディレクトリ群をまとめてプロジェクトレイアウトと呼称します。</p>
<p>プロジェクトレイアウトをコピペで作っていると、プロジェクト名が異なっていると、
影響するファイル名やClass名が多いでしょう。
そんなツールの1つにcookiecutterというオープンソースがあります。</p>
<ul>
<li><a href="https://github.com/audreyr/cookiecutter">audreyr/cookiecutter</a></li>
</ul>
<p>図で説明すると、次のようになります。</p>
<p><img alt="CookieCutterのアーキテクチャ" src="../cookiecutter-architecture.svg" /></p>
<ul>
<li>プロジェクトの雛形: Githubリポジトリ or ローカル</li>
<li>雛形に挿入する値: cookiecutter利用者に委ねられる。デフォルトはインタラクティブに入力。</li>
<li>Project Layout: 出力結果。</li>
</ul>
<h2 id="_1">使い方<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<h3 id="_2">インタラクティブに使う<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<p>もっともシンプルなコマンドは、引数にテンプレートのURLもしくは相対パスを指定することです。</p>
<p>Pythonのパッケージを作る際のボイラープレートで試してみます(<a href="https://github.com/audreyr/cookiecutter-pypackage">audreyr/cookiecutter-pypackage</a>)。</p>
<pre><code class="bash">$ cookiecutter https://github.com/audreyr/cookiecutter-pypackage.git
</code></pre>

<p><img alt="CookieCutterを実行したときの画像" src="../cookiecutter-sample.png" /></p>
<p>対話式に聞かれた後に、プロジェクトレイアウトが生成されます。</p>
<h3 id="help">Help<a class="headerlink" href="#help" title="Permanent link">&para;</a></h3>
<p><code>cookiecutter -h</code> でヘルプを表示しておきます。</p>
<pre><code>Usage: cookiecutter [OPTIONS] TEMPLATE [EXTRA_CONTEXT]...

  Create a project from a Cookiecutter project template (TEMPLATE).

  Cookiecutter is free and open source software, developed and managed by
  volunteers. If you would like to help out or fund the project, please get
  in touch at https://github.com/audreyr/cookiecutter.

Options:
  -V, --version              Show the version and exit.
  --no-input                 Do not prompt for parameters and only use
                             cookiecutter.json file content
  -c, --checkout TEXT        branch, tag or commit to checkout after git clone
  -v, --verbose              Print debug information
  --replay                   Do not prompt for parameters and only use
                             information entered previously
  -f, --overwrite-if-exists  Overwrite the contents of the output directory if
                             it already exists
  -o, --output-dir PATH      Where to output the generated project dir into
  --config-file PATH         User configuration file
  --default-config           Do not load a config file. Use the defaults
                             instead
  --debug-file PATH          File to be used as a stream for DEBUG logging
  -h, --help                 Show this message and exit.

</code></pre>

<h2 id="_3">自分のテンプレートを作る<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<p>とてもシンプルです。
CookieCutterは内部のテンプレートエンジンに<a href="http://jinja.pocoo.org/docs/2.10/">Jinja2</a>を採用しており、
Jinja2の記法が利用できます。</p>
<h3 id="_4">速攻サンプル<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p>最もシンプルなテンプレートを作成してみます。</p>
<pre><code>simple-template/
├── cookiecutter.json
└── {{cookiecutter.project_name}}/
</code></pre>

<p><code>cookiecutter.json</code>の中身は次のようにします。</p>
<pre><code>{
    &quot;project_name&quot;: &quot;hello-world&quot;
}
</code></pre>

<p>次に、<code>simple-template</code>をテンプレートとして利用してみます。</p>
<pre><code class="bash">$ cookiecutter ./simple-template
</code></pre>

<p>これでテンプレートとして利用できます。</p>
<h3 id="_5">カスタマイズ方法<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<p>cookiecutterで自作テンプレートを作るときは、次のルールを守っておけば良いでしょう。</p>
<ol>
<li>変数の定義は<code>cookiecutter.json</code>に書く。<ul>
<li>利用可能な型は、String, List, Dictionaryです。</li>
</ul>
</li>
<li>変数を展開する場所では<code>{{cookiecutter.xxx}}</code>のように、Jinja2のテンプレートが展開できる記法で記述し、<code>cookiecutter</code>のメンバ変数として展開できるようにしておく。<ul>
<li>展開時に、条件分岐を行ったり、for-loopを利用することも可能です。</li>
</ul>
</li>
</ol>
<p>詳しい説明は<a href="https://cookiecutter.readthedocs.io/en/latest/advanced/index.html">Advanced Usage - cookiecutter</a>に載っています。</p>
<p>また、既に公開されているcookiecutter用のテンプレートを見てみることもお勧めします。</p>
<ul>
<li><a href="https://github.com/audreyr/cookiecutter-pypackage/blob/master/cookiecutter.json">cookiecutter.json - audreyr/cookiecutter-pypackage</a></li>
</ul>
<h2 id="_6">公開する<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h2>
<p>とてもシンプルな答えはGithubやBitbucketにホスティングすることです。</p>
<h2 id="_7">最後に<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h2>
<p>作っては捨て、という大量生産大量消費の時代にもってこいなパッケージとなっております。
cookiecutterはPythonで作成されていますが、テンプレートとするプロジェクトは言語を問いません。</p>
<p>DEMOでプレビューするときや、ちょっとした検証をしたい時用の雛形を予め作っておくと時間の節約になります。</p></div>
        </div>
        <div class="nav-layout page-nav"><h2>ページ内目次</h2><ul>
    
    <li><a href="#cookiecutter">自作のファイルテンプレート(雛形)を生成するCookiecutterの使い方</a></li>
    
    <li><a href="#_1">使い方</a></li>
    
    <li><a href="#_3">自分のテンプレートを作る</a></li>
    
    <li><a href="#_6">公開する</a></li>
    
    <li><a href="#_7">最後に</a></li>
    
    
</ul></div>
    </div>
    <script src="/javascripts/prism.js"></script>
    <script src="/javascripts/mermaid.min.js"></script>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-55455343-7', 'himenon.github.io');
ga('send', 'pageview');
</script>
</body>
</html>