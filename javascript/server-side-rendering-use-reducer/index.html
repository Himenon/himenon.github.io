<html>

  <head lang="ja">
    <title>React.useReducerを利用したアプリケーションをSSRする</title>
    <meta charSet="utf-8" />
    <meta name="keywords" content="react,hooks,useReducer,reducer,server side,rendering,ssr" />
    <meta name="description" content="&#x27;Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons&#x27;の対処方法" />
    <meta name="copyright" content="@Himenon" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@Himenon" />
    <meta property="og:title" content="React.useReducerを利用したアプリケーションをSSRする" />
    <meta property="og:url" content="https://himenon.github.io/javascript/server-side-rendering-use-reducer" />
    <meta property="og:description" content="&#x27;Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons&#x27;の対処方法" />
    <meta property="og:image" content="https://himenon.github.io/assets/images/miku.png" />
    <meta name="viewport" content="initial-scale=1,minimum-scale=0.5,user-scalable=no" />
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/miku.png?6f93c" />
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon-32x32.png?bcd9b" />
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon-16x16.png?319f2" />
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:600,800?55911" rel="stylesheet" />
    <link href="/lib/prism.css?f5393" rel="stylesheet" />
    <link href="/assets/stylesheets/styles.css?1db30" rel="stylesheet" />
    <script>
      (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
          (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
          m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
      })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

      ga('create', 'UA-55455343-7', 'auto');
      ga('send', 'pageview');
    </script>
    <script id="csr-props" data-csr-props="{&quot;htmlMetaData&quot;:{&quot;lang&quot;:&quot;ja&quot;,&quot;title&quot;:&quot;React.useReducerを利用したアプリケーションをSSRする&quot;,&quot;description&quot;:&quot;&#x27;Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons&#x27;の対処方法&quot;,&quot;keywords&quot;:&quot;react,hooks,useReducer,reducer,server side,rendering,ssr&quot;,&quot;copyright&quot;:&quot;@Himenon&quot;,&quot;viewport&quot;:{&quot;initial-scale&quot;:1,&quot;minimum-scale&quot;:0.5,&quot;user-scalable&quot;:&quot;no&quot;},&quot;thirdParty&quot;:{&quot;googleAnalytics&quot;:{&quot;ua&quot;:&quot;UA-55455343-7&quot;}},&quot;js&quot;:[],&quot;css&quot;:[&quot;https://fonts.googleapis.com/css?family=Open+Sans:600,800&quot;,&quot;./node_modules/prismjs/themes/prism.css&quot;,&quot;/assets/stylesheets/styles.css&quot;],&quot;link&quot;:[{&quot;rel&quot;:&quot;apple-touch-icon&quot;,&quot;sizes&quot;:&quot;180x180&quot;,&quot;href&quot;:&quot;assets/images/miku.png&quot;},{&quot;rel&quot;:&quot;icon&quot;,&quot;type&quot;:&quot;image/png&quot;,&quot;sizes&quot;:&quot;32x32&quot;,&quot;href&quot;:&quot;assets/images/favicon-32x32.png&quot;},{&quot;rel&quot;:&quot;icon&quot;,&quot;type&quot;:&quot;image/png&quot;,&quot;sizes&quot;:&quot;16x16&quot;,&quot;href&quot;:&quot;assets/images/favicon-16x16.png&quot;}],&quot;globalScripts&quot;:[],&quot;globalLinks&quot;:[{&quot;rel&quot;:&quot;apple-touch-icon&quot;,&quot;sizes&quot;:&quot;180x180&quot;,&quot;href&quot;:&quot;/assets/images/miku.png&quot;},{&quot;rel&quot;:&quot;icon&quot;,&quot;type&quot;:&quot;image/png&quot;,&quot;sizes&quot;:&quot;32x32&quot;,&quot;href&quot;:&quot;/assets/images/favicon-32x32.png&quot;},{&quot;rel&quot;:&quot;icon&quot;,&quot;type&quot;:&quot;image/png&quot;,&quot;sizes&quot;:&quot;16x16&quot;,&quot;href&quot;:&quot;/assets/images/favicon-16x16.png&quot;},&quot;https://fonts.googleapis.com/css?family=Open+Sans:600,800&quot;,&quot;/lib/prism.css&quot;,&quot;/assets/stylesheets/styles.css&quot;],&quot;localLinks&quot;:[],&quot;extend&quot;:{&quot;meta&quot;:[{&quot;name&quot;:&quot;twitter:card&quot;,&quot;content&quot;:&quot;summary&quot;},{&quot;name&quot;:&quot;twitter:site&quot;,&quot;content&quot;:&quot;@Himenon&quot;},{&quot;property&quot;:&quot;og:title&quot;,&quot;content&quot;:&quot;React.useReducerを利用したアプリケーションをSSRする&quot;},{&quot;property&quot;:&quot;og:url&quot;,&quot;content&quot;:&quot;https://himenon.github.io/javascript/server-side-rendering-use-reducer&quot;},{&quot;property&quot;:&quot;og:description&quot;,&quot;content&quot;:&quot;&#x27;Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons&#x27;の対処方法&quot;},{&quot;property&quot;:&quot;og:image&quot;,&quot;content&quot;:&quot;https://himenon.github.io/assets/images/miku.png&quot;}]}},&quot;page&quot;:{&quot;uri&quot;:&quot;/javascript/server-side-rendering-use-reducer&quot;,&quot;content&quot;:&quot;\n## 修正方法\n\nwebpackでパッケージングされたライブラリをサーバー側で利用するReactのライブラリは、以下の設定を行う。\n\n```js\n// webpack.Configuration\n{\n  externals: [\n    {\n      react: \&quot;react\&quot;,\n      \&quot;react-dom\&quot;: \&quot;react-dom\&quot;,\n    },\n  ],\n}\n```\n\nクライアントサイドで利用する場合は、\n\n```js\n// webpack.Configuration\n{\n  externals: [\n    {\n      react: \&quot;React\&quot;,\n      \&quot;react-dom\&quot;: \&quot;ReactDOM\&quot;,\n    }\n  ],\n}\n```\n\nとなる。\n\n## エラー\n\n```\nError: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\n1. You might have mismatching versions of React and the renderer (such as React DOM)\n2. You might be breaking the Rules of Hooks\n3. You might have more than one copy of React in the same app\nSee https://fb.me/react-invalid-hook-call for tips about how to debug and fix this problem.\n```\n\n## 参考文献\n\n* Invalid Hook Call Warning – React&lt;br /&gt;&lt;https://reactjs.org/warnings/invalid-hook-call-warning.html#duplicate-react&gt;\n* Hooks + multiple instances of React · Issue #13991 · facebook/react&lt;br /&gt;&lt;https://github.com/facebook/react/issues/13991&gt;\n\n\n&quot;,&quot;metaData&quot;:{&quot;lang&quot;:&quot;ja&quot;,&quot;title&quot;:&quot;React.useReducerを利用したアプリケーションをSSRする&quot;,&quot;description&quot;:&quot;&#x27;Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons&#x27;の対処方法&quot;,&quot;keywords&quot;:&quot;react,hooks,useReducer,reducer,server side,rendering,ssr&quot;,&quot;copyright&quot;:&quot;@Himenon&quot;,&quot;viewport&quot;:{&quot;initial-scale&quot;:1,&quot;minimum-scale&quot;:0.5,&quot;user-scalable&quot;:&quot;no&quot;},&quot;thirdParty&quot;:{&quot;googleAnalytics&quot;:{&quot;ua&quot;:&quot;UA-55455343-7&quot;}},&quot;js&quot;:[],&quot;css&quot;:[&quot;https://fonts.googleapis.com/css?family=Open+Sans:600,800&quot;,&quot;./node_modules/prismjs/themes/prism.css&quot;,&quot;/assets/stylesheets/styles.css&quot;],&quot;link&quot;:[{&quot;rel&quot;:&quot;apple-touch-icon&quot;,&quot;sizes&quot;:&quot;180x180&quot;,&quot;href&quot;:&quot;assets/images/miku.png&quot;},{&quot;rel&quot;:&quot;icon&quot;,&quot;type&quot;:&quot;image/png&quot;,&quot;sizes&quot;:&quot;32x32&quot;,&quot;href&quot;:&quot;assets/images/favicon-32x32.png&quot;},{&quot;rel&quot;:&quot;icon&quot;,&quot;type&quot;:&quot;image/png&quot;,&quot;sizes&quot;:&quot;16x16&quot;,&quot;href&quot;:&quot;assets/images/favicon-16x16.png&quot;}],&quot;globalScripts&quot;:[],&quot;globalLinks&quot;:[{&quot;rel&quot;:&quot;apple-touch-icon&quot;,&quot;sizes&quot;:&quot;180x180&quot;,&quot;href&quot;:&quot;/assets/images/miku.png&quot;},{&quot;rel&quot;:&quot;icon&quot;,&quot;type&quot;:&quot;image/png&quot;,&quot;sizes&quot;:&quot;32x32&quot;,&quot;href&quot;:&quot;/assets/images/favicon-32x32.png&quot;},{&quot;rel&quot;:&quot;icon&quot;,&quot;type&quot;:&quot;image/png&quot;,&quot;sizes&quot;:&quot;16x16&quot;,&quot;href&quot;:&quot;/assets/images/favicon-16x16.png&quot;},&quot;https://fonts.googleapis.com/css?family=Open+Sans:600,800&quot;,&quot;/lib/prism.css&quot;,&quot;/assets/stylesheets/styles.css&quot;],&quot;localLinks&quot;:[],&quot;extend&quot;:{&quot;meta&quot;:[{&quot;name&quot;:&quot;twitter:card&quot;,&quot;content&quot;:&quot;summary&quot;},{&quot;name&quot;:&quot;twitter:site&quot;,&quot;content&quot;:&quot;@Himenon&quot;},{&quot;property&quot;:&quot;og:title&quot;,&quot;content&quot;:&quot;React.useReducerを利用したアプリケーションをSSRする&quot;},{&quot;property&quot;:&quot;og:url&quot;,&quot;content&quot;:&quot;https://himenon.github.io/javascript/server-side-rendering-use-reducer&quot;},{&quot;property&quot;:&quot;og:description&quot;,&quot;content&quot;:&quot;&#x27;Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons&#x27;の対処方法&quot;},{&quot;property&quot;:&quot;og:image&quot;,&quot;content&quot;:&quot;https://himenon.github.io/assets/images/miku.png&quot;}]}},&quot;ext&quot;:&quot;.md&quot;,&quot;filename&quot;:&quot;src/javascript/server-side-rendering-use-reducer.md&quot;,&quot;name&quot;:&quot;javascript/server-side-rendering-use-reducer&quot;,&quot;raw&quot;:&quot;---\ntitle: React.useReducerを利用したアプリケーションをSSRする\ndescription: \&quot;&#x27;Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons&#x27;の対処方法\&quot;\nkeywords: \&quot;react,hooks,useReducer,reducer,server side,rendering,ssr\&quot;\n---\n\n## 修正方法\n\nwebpackでパッケージングされたライブラリをサーバー側で利用するReactのライブラリは、以下の設定を行う。\n\n```js\n// webpack.Configuration\n{\n  externals: [\n    {\n      react: \&quot;react\&quot;,\n      \&quot;react-dom\&quot;: \&quot;react-dom\&quot;,\n    },\n  ],\n}\n```\n\nクライアントサイドで利用する場合は、\n\n```js\n// webpack.Configuration\n{\n  externals: [\n    {\n      react: \&quot;React\&quot;,\n      \&quot;react-dom\&quot;: \&quot;ReactDOM\&quot;,\n    }\n  ],\n}\n```\n\nとなる。\n\n## エラー\n\n```\nError: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\n1. You might have mismatching versions of React and the renderer (such as React DOM)\n2. You might be breaking the Rules of Hooks\n3. You might have more than one copy of React in the same app\nSee https://fb.me/react-invalid-hook-call for tips about how to debug and fix this problem.\n```\n\n## 参考文献\n\n* Invalid Hook Call Warning – React&lt;br /&gt;&lt;https://reactjs.org/warnings/invalid-hook-call-warning.html#duplicate-react&gt;\n* Hooks + multiple instances of React · Issue #13991 · facebook/react&lt;br /&gt;&lt;https://github.com/facebook/react/issues/13991&gt;\n\n\n&quot;},&quot;site&quot;:{&quot;title&quot;:&quot;himenon.github.io&quot;,&quot;description&quot;:&quot;早く画面から出たい人の備忘録。&quot;,&quot;baseUri&quot;:&quot;/&quot;,&quot;baseUrl&quot;:&quot;https://himenon.github.io&quot;}}"></script>
  </head>

  <body>

    <body>
      <div>
        <nav id="nav-bar">
          <div id="nav-bar-container"><a href="/">TOP</a></div>
        </nav>
        <header id="site-header">
          <div id="site-header-container">
            <h1 id="page-title">React.useReducerを利用したアプリケーションをSSRする</h1>
            <p id="page-description">&#x27;Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons&#x27;の対処方法</p>
            <p id="article-time"><span id="posted-at__label">投稿日</span><time>2020-03-26 12:29:37</time><span id="created-at__label">更新日</span><time>2020-03-26 12:29:37</time></p>
          </div>
        </header>
      </div>
      <div class="wrapper">
        <section>
          <h2>修正方法</h2>
          <p>webpackでパッケージングされたライブラリをサーバー側で利用するReactのライブラリは、以下の設定を行う。</p><pre class="language-js"><code class="language-js"><span class="token comment">// webpack.Configuration</span>
<span class="token punctuation">{</span>
  externals<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      react<span class="token punctuation">:</span> <span class="token string">"react"</span><span class="token punctuation">,</span>
      <span class="token string">"react-dom"</span><span class="token punctuation">:</span> <span class="token string">"react-dom"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre>
          <p>クライアントサイドで利用する場合は、</p><pre class="language-js"><code class="language-js"><span class="token comment">// webpack.Configuration</span>
<span class="token punctuation">{</span>
  externals<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      react<span class="token punctuation">:</span> <span class="token string">"React"</span><span class="token punctuation">,</span>
      <span class="token string">"react-dom"</span><span class="token punctuation">:</span> <span class="token string">"ReactDOM"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre>
          <p>となる。</p>
          <h2>エラー</h2><pre class="language-plain"><code class="language-plain">Error: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://fb.me/react-invalid-hook-call for tips about how to debug and fix this problem.
</code></pre>
          <h2>参考文献</h2>
          <ul>
            <li>Invalid Hook Call Warning – React<br /><a href="https://reactjs.org/warnings/invalid-hook-call-warning.html#duplicate-react">https://reactjs.org/warnings/invalid-hook-call-warning.html#duplicate-react</a></li>
            <li>Hooks + multiple instances of React · Issue #13991 · facebook/react<br /><a href="https://github.com/facebook/react/issues/13991">https://github.com/facebook/react/issues/13991</a></li>
          </ul>
        </section>
      </div>
    </body>
  </body>

</html>