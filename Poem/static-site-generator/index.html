<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="author" content="K.Himeno">
    
    <link rel="shortcut icon" href="../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>静的サイトジェネレーターを選ぶとき、何を思ふ？ - 技術の定点観測</title>
    <link href="../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">
    <link href="../../assets/css/font.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../js/jquery-3.2.1.min.js"></script>
    <script src="../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "\u9759\u7684\u30b5\u30a4\u30c8\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u30fc\u3092\u9078\u3076\u3068\u304d\u3001\u4f55\u3092\u601d\u3075\uff1f", url: "#_1", children: [
              {title: "\u74b0\u5883\u69cb\u7bc9/\u6a5f\u80fd\u9762", url: "#_2" },
              {title: "\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u3001\u30d5\u30a1\u30a4\u30eb\u7ba1\u7406", url: "#_4" },
              {title: "\u62e1\u5f35\u6a5f\u80fd", url: "#_5" },
              {title: "\u30d5\u30a9\u30f3\u30c8", url: "#_9" },
              {title: "\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3", url: "#_10" },
              {title: "\u6700\u5f8c\u306b", url: "#_11" },
          ]},
        ];

    </script>
    <script src="../../js/base.js"></script>
      <script src="../../assets/js/mermaid.min.js"></script>
      <script src="../../search/require.js"></script>
      <script src="../../search/search.js"></script>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-55455343-7', 'himenon.github.io');
        ga('send', 'pageview');
    </script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
    

    <h1 id="_1">静的サイトジェネレーターを選ぶとき、何を思ふ？<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<p id="created_at">作成日: <time datetime="2018-02-14T01:30">2018/02/14</time></p>

<p><a href="https://www.staticgen.com/">StaticGen</a>というサイトでいろいろと紹介されていますね。</p>
<p>好みのものを選ぶと良いのですが、通常のブログと違い、運用に手間がかかります。
個人的に、Jekyll、Pelican、Middleman、Sphinx、MkDocs（当サイト）を使ってみて
どういう考え方でジェネレーターを選ぶか気の向くまま書いてみようと思います。</p>
<h2 id="_2">環境構築/機能面<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p>次の4つが円滑に使用できない、もしくは実行できない、ようなジェネレータは
書くコストを高くするだけなので利用しないほうが良いと思います。</p>
<table>
<thead>
<tr>
<th align="left">項目</th>
<th align="left">利用目的・内容</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><strong>環境構築</strong></td>
<td align="left">パッケージのインストールなど</td>
</tr>
<tr>
<td align="left"><strong>Live reload</strong></td>
<td align="left">自動更新</td>
</tr>
<tr>
<td align="left"><strong>Build</strong></td>
<td align="left">サイトのジェネレート</td>
</tr>
<tr>
<td align="left"><strong>Deploy</strong></td>
<td align="left">サイトのホスティング</td>
</tr>
</tbody>
</table>
<p>また、これを拡張機能を使って実現できるジェネレータは個人的には今現在避けています。
デフォルトで動くってやはり素晴らしいです。</p>
<h3 id="_3">環境構築<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>サイトのジェネレータが依存しているパッケージやモジュールが、
自分にとって不親切なもの、わかりにくいものは避けましょう。
本来の目的は<strong>文章を書くこと</strong>です。
ジェネレータの依存関係を解決することではありません。</p>
<p>また、OSSなどでドキュメントを他の人が書き換える場合がある場合、メンテナスしやすいようにコマンド1つで立ち上がるようにしておくべきです。
Cirlcle CIのドキュメント(<a href="https://github.com/circleci/circleci-docs">circleci/circleci-docs</a>)を修正したときはちょっと感動しました。なぜならば、<code>docker-compose up</code>のみで自分の環境に出来上がったからです。
とても小さな修正でしたが、このお陰でスムーズにコントリビュートでき、とても印象的だったのを覚えています。</p>
<h3 id="live-reload">Live reload<a class="headerlink" href="#live-reload" title="Permanent link">&para;</a></h3>
<p>後ほど出てきますが、シンタックスハイライトなどの確認や、木構造の確認、リンクが正しく配置されているか書くにする時に非常に大切です。些細な事は全体を見て初めて分かることもあるので常に確認できるような環境が整っている方が望ましいでしょう。</p>
<h3 id="build">Build<a class="headerlink" href="#build" title="Permanent link">&para;</a></h3>
<p>たまにあるのですが、live reloadで見ているときは正常に動いているけれど、Buildするときにエラーが出てつまづく、なんと事があります。
さくっとBuildできるようなジェネレータが望ましいです。</p>
<h3 id="deploy">Deploy<a class="headerlink" href="#deploy" title="Permanent link">&para;</a></h3>
<p>最近だと、<a href="https://www.netlify.com/">netlify.com</a>にホスティングするのが主流になってきたでしょうか。
僕が知っているnetlifyは無料で認証つけてくれた時代ももあったのですが、今は結構お金取りますね。。。
脱線してしましました。
一般公開ベースだと、githubかnetlify当たりにホスティングするかと思います。
netlifyにホスティングするならばデフォルトでサポートしているものを選びましょう。
githubだと、travis回しても良いのですが、<code>docs/</code>配下に生成しておけば良いので、
生成場所を設定でさくっと切り替えられるようなものを選んだほうが良いでしょう。</p>
<p>少し進んだことをすると、認証（Basic認証や、<a href="https://github.com/bitly/oauth2_proxy">oauth2_proxy</a>）をかけたいが、コストを抑えたい場合は<a href="https://devcenter.heroku.com/articles/container-registry-and-runtime">Heroku Container Registry</a>などを使うと経済的かと思います。</p>
<h2 id="_4">ディレクトリ構成、ファイル管理<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<p>文章を書きたいだけなのに、CSSとかJavaScriptとか、設定ファイルとかがゴニョゴニョあるのは、目の毒です。
それと、ついつい中身をいじりたくなってしまうので、極力無い方が良いです。</p>
<h3 id="pdf">画像やPDFといったメディアはどこから読み込み込めるか？<a class="headerlink" href="#pdf" title="Permanent link">&para;</a></h3>
<p>(個人的な)結論から先にいいます。
静的サイトジェネレータを使用して画像を配置したりする場合、
文章を記述しているMarkdownのファイルと同じ階層か、深掘りが可能な階層にメディアが
配置できたほうがよいです。</p>
<p>理由は本当に単純で、別のサイトジェネレータに移行した場合や、メディアの差し替えを行う時に、
どれだけ早くできるか、を考えた時にMarkdown内に書かれている相対パスと実際のディレクトリの相対パスが
一致している方が圧倒的に移植性が高いです。</p>
<h4 id="good">Good<a class="headerlink" href="#good" title="Permanent link">&para;</a></h4>
<p>例えば、次のようにファイル構成があったとき、hello.md内で画像を呼び出したい場合があるとします。</p>
<pre><code>hello.md
media/image.png
</code></pre>

<p>いま、ここで推している参照方法は、次のように相対パスで呼び出せる方法です。</p>
<pre><code class="markdown">![image](media/image.png)
![image](./media/image.png)
</code></pre>

<h4 id="bad">Bad<a class="headerlink" href="#bad" title="Permanent link">&para;</a></h4>
<p>Badなパターンは次のような構成です。</p>
<pre><code>src/docs/hello.md
   /assets/img/image.png
</code></pre>

<p>Markdown中の記述は次のように書きます。</p>
<pre><code class="markdown">![image](/img/image.png)
</code></pre>

<p>このような場合は最悪です。ルートディレクトリから始まっている場合はサイトジェネレータのホスティングの都合を押し付けられているため、文章を書く妨げになります。
管理が大変です。</p>
<p>モチベーションを下げる原因になるので、このようなサイトジェネレータを選ぶのは避けたほうが良いでしょう。</p>
<h2 id="_5">拡張機能<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<p>どんな拡張機能でも、1分以内に追加できるもの・仕組みである方がいい。
だって、拡張機能のためにドキュメントを読みだすと、脱線しちゃうもの。</p>
<h3 id="syntax-highlight-code-highlight">Syntax Highlight / Code Highlight<a class="headerlink" href="#syntax-highlight-code-highlight" title="Permanent link">&para;</a></h3>
<p>特に、エンジニアなら、コードを書くのでコードハイライト
(<a href="https://highlightjs.org/">highlight.js</a>, <a href="http://prismjs.com/">prismjs</a>あたり？）が後からとても簡単な設定で導入できると嬉しいと思う。
また、テーマの色も簡単に変えられるものを探したほうが良い。</p>
<h3 id="_6">サイト内検索機能<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<p>技術的なブログを書いたり、メモ代わりにするなら検索機能は必須だと思う。
あるものを探したほうが良い。</p>
<h3 id="_7">タグ<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<p>あるに越したことはないと思うが、個人的にはなくても良いと思っている。
（SEO的にはあったほうが良いのかもしれないけれど）
理由は単純で、管理が大変だからです。静的サイトジェネレータの性質上、全て自分で書いていくのです。
いちいち、どんなタグを付けるかを考えるより、どのディレクトリの下にこの文章を配置しようか、
を考えたほうがよっぽど大切です。</p>
<p>長く静的サイトジェネレータを利用していくならば、ディレクトリの切り方を長く見据えて構築した方がいい。
また、代替のジェネレータはディレクトリのURIがサイトのURLに反映されるので、そこまで頑張ってタグをつけなくてもいいでしょう。</p>
<p>タグで検索するぐらいだったら、サイト内検索がしっかりとしたものを探したほうがよっぽどマシです。</p>
<h3 id="_8">日付<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<p>日付は非常に大事です。Googleにインデックスされる日付のはMarkupされたものじゃないので、そこは気にしなくていいんですが、サイト内には流石に表示したいですよね。
が、かなりのサイトジェネレータが手動でつけていくようになっています。</p>
<p>個人的には、gitのコミットログだったり、ファイルの作成日と更新日から自動的に取得して、ビルド時に自動的に入力してくれると、その管理工数が減るので非常に楽です。まだ、そのような拡張機能に出会っていないので、実はあるよ、なんてあれば教えてください。</p>
<h3 id="markdownextension">MarkdownのExtension<a class="headerlink" href="#markdownextension" title="Permanent link">&para;</a></h3>
<p>個人的には、<a href="https://github.com/facelessuser/pymdown-extensions">pymdown-extensions</a>が好みだ(<a href="https://pypi.python.org/pypi/pymdown-extensions">pypi</a>, <a href="https://facelessuser.github.io/pymdown-extensions/">Document</a>)。この拡張機能のドキュメントはmkdocsで作成されている。超クールなテーマの<a href="https://squidfunk.github.io/mkdocs-material/">Material for MkDocs</a>を利用している。
<a href="https://squidfunk.github.io/mkdocs-material/extensions/admonition/">Extensions</a>が素晴らしいのでぜひ見て欲しい(mkdocsのステマ)。</p>
<p>ただ、Markdownの拡張機能を入れると、それ以外のツールでは再現できないなどの不具合も生じてしまう。
しかし、<a href="https://github.com/facelessuser/pymdown-extensions">pymdown-extensions</a>の記法が独特かと言われるとそうでもなく、reStructuredTextで見られるようなディレクティブをMarkdownに落とし込んだ形になっている。</p>
<h3 id="restructuredtext">reStructuredTextについて<a class="headerlink" href="#restructuredtext" title="Permanent link">&para;</a></h3>
<p>大学時代のドキュメントは<a href="http://www.sphinx-doc.org/ja/stable/">Sphinx</a>で書いてきました。
理由は単純で、TeXを使っている、かつ研究室内のサーバーにウェブドキュメントとしてホスティングすることで誰もが簡単にドキュメントにアクセスするためです。
電子機器を持ち込めないような場所は紙で印刷する必要もあったため、SphinxのPDFエクスポート機能にはだいぶ助けられました。
TeXで数式を掛けるところからも非常に役にたちました。</p>
<p>特に、ディレクティブが優秀で、後からclassをつけたり、画像のサイズ変更したりでき、
目次ツリーや、<code>include</code>でファイルを分割できるところも非常に活躍しました。</p>
<p>だけれども、最近のエディターではMarkdownのサポートが主流で、<a href="http://docs.sphinx-users.jp/rest.html">reStructuredText</a>の記法で書いているドキュメントは、ちょっと（数年）前Pythonのライブラリ系ぐらいしか見ない。</p>
<p>使い勝手の面からしてもMarkdownのほうが便利だったため、
PyPI用のドキュメントを書く以外では、最近ではなかなか使っていません。</p>
<h2 id="_9">フォント<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h2>
<p>テーマ単位でフォントが決まっているものが多いですが、自分の気に行ったフォントを選びましょう。</p>
<p>私個人としては、単純に<strong>読める</strong>フォントをお勧めします。</p>
<h2 id="_10">アニメーション<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h2>
<p>凝ったアニメーションはドキュメントには不要と思っています。
WEBの情報は流して見るものですから、さっさと切り替わって目的の情報さえ得られればよいです。</p>
<h2 id="_11">最後に<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h2>
<p>このサイト、iframeで構成されています。SPAのデバッグモードじゃないですよ？</p>
<ul>
<li><a href="https://github.com/gristlabs/mkdocs-windmill">gristlabs/mkdocs-windmill</a></li>
</ul>
<p>こういうの、嫌いじゃないです。むしろ好きです。</p>

  <br>
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../../Presentation/2018/03-02-Yoidore-GCPUG-LT/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../../Presentation/2018/03-02-Yoidore-GCPUG-LT/" class="btn btn-xs btn-link">
        03 02 Yoidore GCPUG LT
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../read-basic-knowledge-of-nosql/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../read-basic-knowledge-of-nosql/" class="btn btn-xs btn-link">
        NOSQLとは何か...
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="col-md-12 wm-page-content">
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>