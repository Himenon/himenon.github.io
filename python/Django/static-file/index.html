<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@himenoglyph" />
<meta property="og:url" content="https://himenon.github.io/python/Django/static-file/" />
<meta property="og:title" content="Staticファイルの取扱 - 技術の定点観測" />
<meta property="og:description" content="手を動かして実践したことの内容の集積場です。真似して学んでいくスタンス。楽しんでやる。" />
<meta property="og:image" content="https://himenon.github.io/images/apple-touch-icon.png" />
<link rel="apple-touch-icon" sizes="180x180" href="https://himenon.github.io/images/miku.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://himenon.github.io/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://himenon.github.io/images/favicon-16x16.png">
<meta name="msapplication-TileColor" content="#2d89ef">
<meta name="theme-color" content="#ffffff">
    <title>Staticファイルの取扱 | 技術の定点観測</title>
    
    <link rel="stylesheet" href="/stylesheets/reboot.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/styles/default.min.css">
    <link rel="stylesheet" href="/stylesheets/pc.css">
    <link rel="stylesheet" href="/stylesheets/tablet.css">
    <link rel="stylesheet" href="/stylesheets/sp.css">
    <link rel="stylesheet" href="/stylesheets/prism.css">
</head>
<body>
    <header class="site-header">
        <h1><a href="https://himenon.github.io/">技術の定点観測</a></h1>
        <div class="sns-share"><a href="https://twitter.com/share?ref_src=twsrc%5Etfw"
   class="twitter-share-button"
   data-text="Staticファイルの取扱 - 技術の定点観測"
   data-via="himenoglyph "
   data-related="himenoglyph"
   data-show-count="true">Tweet</a>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></div>
    </header>
    <div class="container">
        <div class="nav-layout left-nav"><h2>ページ内目次</h2><ul>
    
    <li><a href="#static">Staticファイルの取扱</a></li>
    
    
</ul></div>
        <div class="content">
            <div class="content-body"><h1 id="static">Staticファイルの取扱<a class="headerlink" href="#static" title="Permanent link">&para;</a></h1>
<ul>
<li>作成日：2017年12月07日</li>
<li>公開日：2018年09月15日</li>
</ul>
<pre><code>root@f363e9217eab:/django# ./manage.py collectstatic

You have requested to collect static files at the destination
location as specified in your settings.

This will overwrite existing files!
Are you sure you want to do this?

Type 'yes' to continue, or 'no' to cancel: yes
Traceback (most recent call last):
  File &quot;./manage.py&quot;, line 20, in &lt;module&gt;
    execute_from_command_line(sys.argv)
  File &quot;/usr/local/lib/python3.6/site-packages/django/core/management/__init__.py&quot;, line 364, in execute_from_command_line
    utility.execute()
  File &quot;/usr/local/lib/python3.6/site-packages/django/core/management/__init__.py&quot;, line 356, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File &quot;/usr/local/lib/python3.6/site-packages/django/core/management/base.py&quot;, line 283, in run_from_argv
    self.execute(*args, **cmd_options)
  File &quot;/usr/local/lib/python3.6/site-packages/django/core/management/base.py&quot;, line 330, in execute
    output = self.handle(*args, **options)
  File &quot;/usr/local/lib/python3.6/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py&quot;, line 199, in handle
    collected = self.collect()
  File &quot;/usr/local/lib/python3.6/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py&quot;, line 124, in collect
    handler(path, prefixed_path, storage)
  File &quot;/usr/local/lib/python3.6/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py&quot;, line 354, in copy_file
    if not self.delete_file(path, prefixed_path, source_storage):
  File &quot;/usr/local/lib/python3.6/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py&quot;, line 260, in delete_file
    if self.storage.exists(prefixed_path):
  File &quot;/usr/local/lib/python3.6/site-packages/django/core/files/storage.py&quot;, line 392, in exists
    return os.path.exists(self.path(name))
  File &quot;/usr/local/lib/python3.6/site-packages/django/contrib/staticfiles/storage.py&quot;, line 50, in path
    raise ImproperlyConfigured(&quot;You're using the staticfiles app &quot;
django.core.exceptions.ImproperlyConfigured: You're using the staticfiles app without having set the STATIC_ROOT setting to a filesystem path.
</code></pre>

<pre><code class="python">import os
ROOT_PATH = os.path.dirname(__file__)

STATICFILES_DIRS = [os.path.join(ROOT_PATH, 'static')]
</code></pre>

<p><a href="https://qiita.com/aion/items/add0c983150a2a1e100d">Django 静的ファイル (static) 関係の設定まとめ</a></p>
<blockquote>
<p>The reason that STATICFILES_DIRS wants a filesystem path is that it needs to know where the files live in the operating system (so things like manage.py collectstatic are possible). The STATIC_URL setting is for webserver paths, and that's what it uses to show to the user in the admin or the {% static %} tag or whatever. STATICFILES_DIRS is server-side only and never shows up in any rendered templates or anything.</p>
</blockquote>
<p>※まとまってない</p>
<p>Djangoを本番環境にデプロイするとき、静的ファイル関係の設定でいろいろはまったので、まとめる。
基本的に以下の5つあるようだが、上から3つだけ使用していたので、それらに関してまとめる。
ちなみに以下のそれぞれの定数はsetting.pyで設定する。</p>
<pre><code>STATIC_ROOT
STATIC_URL
STATICFILES_DIRS (Prefixes (optional))
STATICFILES_STORAGE
STATICFILES_FINDERS
</code></pre></div>
        </div>
        <div class="nav-layout right-nav"><h2>サイト内トピック</h2><ul><li  class="most-deep-item" ><span><b><u>Hey!</u></b></span></li><li  class="most-deep-item" ><a href="https://himenon.github.io/pick-up-article/">Pick Up Article</a></li><li ><span><b><u>Infrastructure</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/Infrastructure/Multiple-Reverse-Proxy-Sapmle-with-oauth2_proxy/">複数のホストをoauth2_proxyを用いてOAuth認証してリバースプロキシする</a></li></ul>
</li><li ><span><b><u>Blog</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/blog/2018-09-17-PyConJP/">PyConJP2018の個人レポート</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/blog/2018-09-20/">genというライブラリを書き直している</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/blog/2018-09-22-2/">cliを読む - genのコード解析</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/blog/2018-09-22-3/">serverを読む - genのコード解析</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/blog/2018-09-22/">genといライブラリの改修作業の進捗</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/blog/2018-09-24/">genの改修作業中に見つけたコード</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/blog/2018-09-25/">作業工程を振り返っておく</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/blog/Container-App-Directory-Management-Consideration/">コンテナアプリケーション作成時のディレクトリ成長設計の考察</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/blog/Container-Worker-Design/">コンテナ型のワーカーの設計（仮）</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/blog/TDD/">TDDポエム</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/blog/read-basic-knowledge-of-nosql/">NOSQLとは何か...</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/blog/static-site-generator/">静的サイトジェネレーターを選ぶとき、何を思ふ？</a></li></ul>
</li><li ><span><b><u>Docker</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/docker/command/">Dockerコマンド</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/docker/pycharm/">PycharmでDockerを使う方法</a></li></ul>
</li><li ><span><b><u>Event</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/event/2018-05-21-Cloud-Native/">[イベントレポート] Cloud Native Meetup Tokyo #1</a></li></ul>
</li><li ><span><b><u>Firebase</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/firebase/Auth-Error-Tips/">FirebaseのAuthで躓いたこと</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/firebase/Firebase-Cloud-Functions/">FirebaseにおけるCloud Functions</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/firebase/Firebase-Starter/">Firebaseことはじめ</a></li></ul>
</li><li ><span><b><u>Gcp</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/gcp/Cloud-Function/">Cloud Function</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/gcp/GKE/">GKEのコマンド</a></li></ul>
</li><li ><span><b><u>Javascript</u></b></span></li><li>
    <ul><li ><span><b><u>Frontend</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/javascript/Frontend/settings/">lodash</a></li><li ><span><b><u>Es6</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/javascript/Frontend/es6/usage-axios/">Axiosでasync/awaitを利用する</a></li></ul>
</li><li ><span><b><u>Vuejs</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/javascript/Frontend/vuejs/my-vue-setup/">Vueのセットアップ</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/javascript/Frontend/vuejs/nuxtjs/">Nuxt.jsをやる</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/javascript/Frontend/vuejs/ssr-cache-investigation/">VuejsのSSR(Server Side Rendering)のページ・部分キャッシュは何で実装できるか</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/javascript/Frontend/vuejs/vuex-usage/">VuexのModuleの使い方</a></li></ul>
</li></ul>
</li><li ><span><b><u>NodeJS</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/javascript/NodeJS/Request-library-description-for-json-value/">nodeのrequestライブラリの`json`オプションの取り扱いについて</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/javascript/NodeJS/dynamic-import/">PackageのDynamic Import</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/javascript/NodeJS/execute-async-mjs/">Module jsで非同期関数を実行する</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/javascript/NodeJS/get-collect-domain-name/">JavaScriptで正確なドメイン名をパースすには？</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/javascript/NodeJS/manage-npm-package/">npmのpaackage管理について</a></li></ul>
</li></ul>
</li><li ><span><b><u>Kubernetes</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/kubernetes/Nginx access control for kubernetes/">Kubernetesに配置したNginxでアクセス制御する</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/kubernetes/Shortcut-for-kubectl/">Kubernetesでよく使うコマンド（コピペ用）</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/kubernetes/cron-wake-up-down/">GKEをCronで起動・停止させる</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/kubernetes/error helm incompatible version/">Error: incompatible versions client[v2.8.2] server[v2.7.2]</a></li></ul>
</li><li ><span><b><u>Mongo db</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/mongo-db/basic-query/">MongoDBの基本クエリ</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/mongo-db/basic-read-write/">mongo DBの基本的なRead Write</a></li></ul>
</li><li ><span><b><u>Mysql</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/mysql/character-code/">DockerのMySQLでUTF-8を使えるようにする</a></li></ul>
</li><li ><span><b><u>Presentation</u></b></span></li><li>
    <ul><li ><span><b><u>2018</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/presentation/2018/03-02-Yoidore-GCPUG-LT/">酔いどれGCPUG で発表してきました</a></li></ul>
</li></ul>
</li><li ><span><b><u>Profile</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/profile/">Profileの目次</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/profile/github-activity/">Githubの活動状況</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/profile/skill/">スキルセット</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/profile/study-history/">参加した勉強会</a></li></ul>
</li><li ><span><b><u>Python</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/python/test-know-how/">PythonのTest</a></li><li ><span><b><u>Django</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/python/Django/Introduction-of-Celery-Django/">Django 2.0にCelery 4.0を導入し、WEBの管理画面でCronを管理する</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/python/Django/Seperate-Django-Database/">Djangoで複数のデータベースを利用する</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/python/Django/fixture/">fixtureを読み込む</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/python/Django/initialize-new-app/">DjangoにAppを新たに追加したときにやること</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/python/Django/show-many-to-many-admin-view/">DjangoでMany to ManyをAdmin画面のリストに表示する方法</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/python/Django/signal/">DjangoのSignalの使い方</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/python/Django/static-file/">Staticファイルの取扱</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/python/Django/unix-socket-and-nginx/">DjangoとNginxのTips</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/python/Django/validate-only-alphabet/">DjangoでValidation アルファベットのみのバリデーションを実装する</a></li></ul>
</li><li ><span><b><u>Flask</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/python/Flask/Hello-Flask-Streamming-Content/">Flaskのストリーミングを利用してみる</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/python/Flask/tips/">FlaskのTips</a></li></ul>
</li><li ><span><b><u>Jupyter</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/python/jupyter/change-jupyter-config-dir/">jupyter_notebook_config.pyの読み込み先を変更する</a></li></ul>
</li><li ><span><b><u>Mkdocs</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/python/mkdocs/tips/">MkDocsのtips</a></li></ul>
</li><li ><span><b><u>Pandas</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/python/pandas/pandas-convert-column-to-datetime/">PandasのColumnをDateTimeに型変換する</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/python/pandas/visualize-time/">時間データのビジュアライズ</a></li></ul>
</li></ul>
</li><li ><span><b><u>Raspberrypi</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/raspberrypi/os-install/">RaspberrypiのOSインストール</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/raspberrypi/purchace/">Raspberrypiのパーツを買った</a></li></ul>
</li><li ><span><b><u>Tools</u></b></span></li><li>
    <ul><li ><span><b><u>Cookiecutter</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/tools/Cookiecutter/usage/">自作のファイルテンプレート(雛形)を生成するCookiecutterの使い方</a></li></ul>
</li><li ><span><b><u>Git</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/tools/Git/git-tips/">Git Tips</a></li></ul>
</li><li ><span><b><u>Github</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/tools/Github/Github-GraphQL/">GithubのGraphQLを利用する</a></li><li  class="most-deep-item" ><a href="https://himenon.github.io/tools/Github/Github-Multi-Login-User/">Githubで複数ユーザーのログインをした時の対応</a></li></ul>
</li><li ><span><b><u>Slack</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/tools/Slack/slack-library/">言語別Slack通知ライブラリ</a></li></ul>
</li><li ><span><b><u>Zapier</u></b></span></li><li>
    <ul><li  class="most-deep-item" ><a href="https://himenon.github.io/tools/Zapier/zapier-development/">Zapierで利用可能なアプリをを時前で作成する</a></li></ul>
</li></ul>
</li></ul></div>
    </div>
    <script src="/javascripts/prism.js"></script>
    <script src="/javascripts/mermaid.min.js"></script>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-55455343-7', 'himenon.github.io');
ga('send', 'pageview');
</script>
</body>
</html>